<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roommate Expense Tracker</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Space Mono', monospace;
            background: #000;
            color: #84cc16;
        }
        #root {
            width: 100%;
            min-height: 100vh;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide icons as inline SVG components
        const Plus = ({ className }) => (
            <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const Trash2 = ({ className }) => (
            <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
        );

        const User = ({ className }) => (
            <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
        );

        const Home = ({ className }) => (
            <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
        );

        const Zap = ({ className }) => (
            <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
            </svg>
        );

        const DollarSign = ({ className }) => (
            <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
        );

        function RoommateExpenses() {
            const [roommate1, setRoommate1] = useState('');
            const [roommate2, setRoommate2] = useState('');
            const [expenses, setExpenses] = useState([]);
            const [newExpense, setNewExpense] = useState({
                description: '',
                amount: '',
                paidBy: '',
                category: 'wifi',
                splitType: '3-way'
            });
            const [totalRentPaid, setTotalRentPaid] = useState('');
            const [showRentCalculator, setShowRentCalculator] = useState(false);
            const [loading, setLoading] = useState(true);
            const [initialized, setInitialized] = useState(false);

            // Load data from localStorage on mount
            useEffect(() => {
                loadData();
            }, []);

            const loadData = () => {
                setLoading(true);
                try {
                    const names = localStorage.getItem('roommate-names');
                    const expenseData = localStorage.getItem('roommate-expenses');
                    
                    if (names) {
                        const parsed = JSON.parse(names);
                        setRoommate1(parsed.roommate1 || '');
                        setRoommate2(parsed.roommate2 || '');
                        setInitialized(true);
                    }
                    
                    if (expenseData) {
                        setExpenses(JSON.parse(expenseData));
                    }
                } catch (error) {
                    console.log('No existing data found, starting fresh');
                }
                setLoading(false);
            };

            const saveNames = (name1, name2) => {
                try {
                    localStorage.setItem('roommate-names', JSON.stringify({
                        roommate1: name1,
                        roommate2: name2
                    }));
                } catch (error) {
                    console.error('Error saving names:', error);
                }
            };

            const saveExpenses = (expenseList) => {
                try {
                    localStorage.setItem('roommate-expenses', JSON.stringify(expenseList));
                } catch (error) {
                    console.error('Error saving expenses:', error);
                }
            };

            const handleSetupComplete = () => {
                if (roommate1.trim() && roommate2.trim()) {
                    saveNames(roommate1, roommate2);
                    setInitialized(true);
                }
            };

            const addExpense = () => {
                if (newExpense.description && newExpense.amount) {
                    const expense = {
                        id: Date.now(),
                        description: newExpense.description,
                        amount: parseFloat(newExpense.amount),
                        paidBy: roommate1,
                        category: newExpense.category,
                        splitType: '3-way',
                        date: new Date().toISOString()
                    };
                    const updatedExpenses = [...expenses, expense];
                    setExpenses(updatedExpenses);
                    saveExpenses(updatedExpenses);
                    setNewExpense({ description: '', amount: '', paidBy: '', category: 'wifi', splitType: '3-way' });
                }
            };

            const addRentWithCalculation = () => {
                if (!totalRentPaid) return;
                
                const total = parseFloat(totalRentPaid);
                
                const baseRent = 3540;
                const valetTrash = 29.5;
                const parking = 25;
                const fixedTotal = baseRent + valetTrash + parking;
                const utils = total - fixedTotal;
                
                const roommateBaseRent = 1700;
                const roommateValet = valetTrash / 2;
                const roommateParking = parking / 2;
                const roommateBaseTotal = roommateBaseRent + roommateValet + roommateParking;
                
                const updatedExpenses = [...expenses];
                
                const baseRentExpense = {
                    id: Date.now(),
                    description: `Monthly Rent - Base`,
                    amount: fixedTotal,
                    paidBy: roommate1,
                    category: 'rent',
                    splitType: 'custom',
                    roommateOwes: roommateBaseTotal,
                    breakdown: {
                        baseRent: roommateBaseRent,
                        valet: roommateValet,
                        parking: roommateParking
                    },
                    date: new Date().toISOString()
                };
                updatedExpenses.push(baseRentExpense);
                
                if (utils > 0) {
                    const utilsExpense = {
                        id: Date.now() + 1,
                        description: `Utilities`,
                        amount: utils,
                        paidBy: roommate1,
                        category: 'utilities',
                        splitType: '3-way',
                        date: new Date().toISOString()
                    };
                    updatedExpenses.push(utilsExpense);
                }
                
                setExpenses(updatedExpenses);
                saveExpenses(updatedExpenses);
                setTotalRentPaid('');
                setShowRentCalculator(false);
            };

            const deleteExpense = (id) => {
                const updatedExpenses = expenses.filter(exp => exp.id !== id);
                setExpenses(updatedExpenses);
                saveExpenses(updatedExpenses);
            };

            const calculateBalances = () => {
                const total = expenses.reduce((sum, exp) => sum + exp.amount, 0);
                const paid1 = expenses.filter(exp => exp.paidBy === roommate1).reduce((sum, exp) => sum + exp.amount, 0);
                const paid2 = expenses.filter(exp => exp.paidBy === roommate2).reduce((sum, exp) => sum + exp.amount, 0);
                
                let roommateOwes = 0;
                
                expenses.forEach(exp => {
                    if (exp.splitType === 'custom' && exp.roommateOwes) {
                        roommateOwes += exp.roommateOwes;
                    } else {
                        const splitAmount = exp.splitType === '3-way' ? (exp.amount * 2) / 3 : exp.amount / 2;
                        roommateOwes += splitAmount;
                    }
                });
                
                return {
                    total,
                    paid1,
                    paid2,
                    owes1: 0,
                    owes2: roommateOwes
                };
            };

            const resetAll = () => {
                if (confirm('Are you sure you want to delete all data? This cannot be undone.')) {
                    try {
                        localStorage.removeItem('roommate-names');
                        localStorage.removeItem('roommate-expenses');
                        setRoommate1('');
                        setRoommate2('');
                        setExpenses([]);
                        setInitialized(false);
                    } catch (error) {
                        console.error('Error resetting data:', error);
                    }
                }
            };

            const getCategoryIcon = (category) => {
                switch(category) {
                    case 'rent': return <Home className="w-4 h-4" />;
                    case 'utilities': return <Zap className="w-4 h-4" />;
                    case 'electric': return <Zap className="w-4 h-4" />;
                    case 'wifi': return <Zap className="w-4 h-4" />;
                    default: return <DollarSign className="w-4 h-4" />;
                }
            };

            const balances = calculateBalances();

            if (loading) {
                return (
                    <div className="min-h-screen bg-black flex items-center justify-center">
                        <div className="text-lime-400 font-mono text-xl">LOADING...</div>
                    </div>
                );
            }

            if (!initialized) {
                return (
                    <div className="min-h-screen bg-black text-lime-400 p-8 font-mono">
                        <style>{`
                            @keyframes flicker {
                                0%, 100% { opacity: 1; }
                                50% { opacity: 0.8; }
                            }
                            
                            .flicker {
                                animation: flicker 2s infinite;
                            }
                            
                            .scanline {
                                position: relative;
                                overflow: hidden;
                            }
                            
                            .scanline::before {
                                content: '';
                                position: absolute;
                                top: 0;
                                left: 0;
                                right: 0;
                                bottom: 0;
                                background: linear-gradient(
                                    transparent 50%,
                                    rgba(0, 255, 0, 0.03) 50%
                                );
                                background-size: 100% 4px;
                                pointer-events: none;
                                z-index: 10;
                            }
                            
                            input {
                                background: #000;
                                border: 2px solid #65a30d;
                                color: #84cc16;
                                padding: 12px;
                                font-size: 16px;
                                outline: none;
                                transition: all 0.2s;
                            }
                            
                            input:focus {
                                border-color: #84cc16;
                                box-shadow: 0 0 20px rgba(132, 204, 22, 0.3);
                            }
                            
                            button {
                                background: #65a30d;
                                color: #000;
                                border: none;
                                padding: 12px 24px;
                                font-weight: bold;
                                cursor: pointer;
                                transition: all 0.2s;
                                text-transform: uppercase;
                            }
                            
                            button:hover {
                                background: #84cc16;
                                box-shadow: 0 0 20px rgba(132, 204, 22, 0.4);
                            }
                        `}</style>
                        
                        <div className="scanline max-w-2xl mx-auto">
                            <div className="border-4 border-lime-600 p-8 bg-black">
                                <h1 className="text-4xl font-bold mb-2 flicker">ROOMMATE.EXE</h1>
                                <div className="text-sm mb-8 text-lime-600">v1.0.0 | EXPENSE TRACKER SYSTEM</div>
                                
                                <div className="mb-8">
                                    <div className="text-sm mb-2 text-lime-600">&gt; INITIALIZE ROOMMATES</div>
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block mb-2 text-sm">ROOMMATE_01:</label>
                                            <input
                                                type="text"
                                                value={roommate1}
                                                onChange={(e) => setRoommate1(e.target.value)}
                                                placeholder="Enter name..."
                                                className="w-full"
                                            />
                                        </div>
                                        <div>
                                            <label className="block mb-2 text-sm">ROOMMATE_02:</label>
                                            <input
                                                type="text"
                                                value={roommate2}
                                                onChange={(e) => setRoommate2(e.target.value)}
                                                placeholder="Enter name..."
                                                className="w-full"
                                            />
                                        </div>
                                    </div>
                                </div>
                                
                                <button
                                    onClick={handleSetupComplete}
                                    disabled={!roommate1.trim() || !roommate2.trim()}
                                    className="w-full"
                                >
                                    &gt;&gt; START SYSTEM
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-black text-lime-400 p-4 md:p-8 font-mono">
                    <style>{`
                        @keyframes flicker {
                            0%, 100% { opacity: 1; }
                            50% { opacity: 0.8; }
                        }
                        
                        .flicker {
                            animation: flicker 2s infinite;
                        }
                        
                        .scanline {
                            position: relative;
                            overflow: hidden;
                        }
                        
                        .scanline::before {
                            content: '';
                            position: absolute;
                            top: 0;
                            left: 0;
                            right: 0;
                            bottom: 0;
                            background: linear-gradient(
                                transparent 50%,
                                rgba(0, 255, 0, 0.03) 50%
                            );
                            background-size: 100% 4px;
                            pointer-events: none;
                            z-index: 10;
                        }
                        
                        input, select {
                            background: #000;
                            border: 2px solid #65a30d;
                            color: #84cc16;
                            padding: 10px;
                            font-size: 14px;
                            outline: none;
                            transition: all 0.2s;
                        }
                        
                        input:focus, select:focus {
                            border-color: #84cc16;
                            box-shadow: 0 0 20px rgba(132, 204, 22, 0.3);
                        }
                        
                        button {
                            background: #65a30d;
                            color: #000;
                            border: none;
                            padding: 10px 20px;
                            font-weight: bold;
                            cursor: pointer;
                            transition: all 0.2s;
                            text-transform: uppercase;
                            font-size: 12px;
                        }
                        
                        button:hover {
                            background: #84cc16;
                            box-shadow: 0 0 20px rgba(132, 204, 22, 0.4);
                        }
                        
                        .danger-btn {
                            background: #dc2626;
                            color: #fff;
                        }
                        
                        .danger-btn:hover {
                            background: #ef4444;
                            box-shadow: 0 0 20px rgba(239, 68, 68, 0.4);
                        }

                        .w-4 { width: 1rem; }
                        .h-4 { height: 1rem; }
                        .w-3 { width: 0.75rem; }
                        .h-3 { height: 0.75rem; }
                        .gap-2 { gap: 0.5rem; }
                        .gap-4 { gap: 1rem; }
                        .mb-1 { margin-bottom: 0.25rem; }
                        .mb-2 { margin-bottom: 0.5rem; }
                        .mb-3 { margin-bottom: 0.75rem; }
                        .mb-4 { margin-bottom: 1rem; }
                        .mb-8 { margin-bottom: 2rem; }
                        .mt-1 { margin-top: 0.25rem; }
                        .mt-4 { margin-top: 1rem; }
                        .ml-4 { margin-left: 1rem; }
                        .p-2 { padding: 0.5rem; }
                        .p-4 { padding: 1rem; }
                        .p-6 { padding: 1.5rem; }
                        .p-8 { padding: 2rem; }
                        .pt-2 { padding-top: 0.5rem; }
                        .pt-4 { padding-top: 1rem; }
                        .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
                        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
                        .py-0\\.5 { padding-top: 0.125rem; padding-bottom: 0.125rem; }
                        .flex { display: flex; }
                        .flex-1 { flex: 1 1 0%; }
                        .items-start { align-items: flex-start; }
                        .items-center { align-items: center; }
                        .justify-between { justify-content: space-between; }
                        .justify-center { justify-content: center; }
                        .grid { display: grid; }
                        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
                        .text-xs { font-size: 0.75rem; line-height: 1rem; }
                        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
                        .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
                        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
                        .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
                        .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
                        .font-bold { font-weight: 700; }
                        .border { border-width: 1px; }
                        .border-2 { border-width: 2px; }
                        .border-4 { border-width: 4px; }
                        .border-t { border-top-width: 1px; }
                        .border-t-2 { border-top-width: 2px; }
                        .border-b-4 { border-bottom-width: 4px; }
                        .border-lime-600 { border-color: #65a30d; }
                        .border-yellow-400 { border-color: #facc15; }
                        .text-lime-400 { color: #84cc16; }
                        .text-lime-600 { color: #65a30d; }
                        .text-yellow-400 { color: #facc15; }
                        .text-red-400 { color: #f87171; }
                        .text-green-400 { color: #4ade80; }
                        .bg-black { background-color: #000; }
                        .bg-lime-950 { background-color: #1a2e05; }
                        .space-y-1 > * + * { margin-top: 0.25rem; }
                        .space-y-2 > * + * { margin-top: 0.5rem; }
                        .space-y-4 > * + * { margin-top: 1rem; }
                        .divide-y-2 > * + * { border-top-width: 2px; }
                        .divide-lime-600 > * + * { border-color: #65a30d; }
                        .w-full { width: 100%; }
                        .max-w-2xl { max-width: 42rem; }
                        .max-w-6xl { max-width: 72rem; }
                        .mx-auto { margin-left: auto; margin-right: auto; }
                        .min-h-screen { min-height: 100vh; }
                        .whitespace-nowrap { white-space: nowrap; }
                        .text-right { text-align: right; }
                        .text-center { text-align: center; }
                        .uppercase { text-transform: uppercase; }
                        .transition-colors { transition-property: color, background-color, border-color; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
                        .hover\\:bg-lime-950:hover { background-color: #1a2e05; }

                        @media (min-width: 768px) {
                            .md\\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
                            .md\\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
                            .md\\:p-6 { padding: 1.5rem; }
                            .md\\:p-8 { padding: 2rem; }
                            .md\\:text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
                            .md\\:text-sm { font-size: 0.875rem; line-height: 1.25rem; }
                        }
                    `}</style>
                    
                    <div className="scanline max-w-6xl mx-auto">
                        <div className="flex justify-between items-start mb-8">
                            <div>
                                <h1 className="text-3xl md:text-4xl font-bold mb-2 flicker">ROOMMATE.EXE</h1>
                                <div className="text-xs md:text-sm text-lime-600">
                                    TRACKING: {roommate1} + {roommate2}
                                </div>
                            </div>
                            <button onClick={resetAll} className="danger-btn">
                                RESET ALL
                            </button>
                        </div>

                        {/* Balance Summary */}
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                            <div className="border-4 border-lime-600 p-4 bg-black">
                                <div className="text-xs text-lime-600 mb-2">TOTAL_EXPENSES</div>
                                <div className="text-2xl font-bold">${balances.total.toFixed(2)}</div>
                            </div>
                            
                            <div className="border-4 border-lime-600 p-4 bg-black">
                                <div className="text-xs text-lime-600 mb-1 flex items-center gap-2">
                                    <User className="w-3 h-3" />
                                    {roommate1.toUpperCase()}
                                </div>
                                <div className="text-xl font-bold mb-1">PAID: ${balances.paid1.toFixed(2)}</div>
                                <div className={`text-sm ${balances.owes1 > 0 ? 'text-red-400' : 'text-green-400'}`}>
                                    {balances.owes1 > 0 ? `OWES: $${balances.owes1.toFixed(2)}` : `OWED: $${Math.abs(balances.owes1).toFixed(2)}`}
                                </div>
                            </div>
                            
                            <div className="border-4 border-lime-600 p-4 bg-black">
                                <div className="text-xs text-lime-600 mb-1 flex items-center gap-2">
                                    <User className="w-3 h-3" />
                                    {roommate2.toUpperCase()}
                                </div>
                                <div className="text-xl font-bold mb-1">PAID: ${balances.paid2.toFixed(2)}</div>
                                <div className={`text-sm ${balances.owes2 > 0 ? 'text-red-400' : 'text-green-400'}`}>
                                    {balances.owes2 > 0 ? `OWES: $${balances.owes2.toFixed(2)}` : `OWED: $${Math.abs(balances.owes2).toFixed(2)}`}
                                </div>
                            </div>
                        </div>

                        {/* Settlement */}
                        <div className="border-4 border-lime-600 p-4 bg-black mb-8">
                            <div className="text-sm text-lime-600 mb-2">&gt; SETTLEMENT_REQUIRED:</div>
                            <div className="text-2xl font-bold mb-4">
                                {balances.owes1 > 0 
                                    ? `${roommate1} pays ${roommate2} $${balances.owes1.toFixed(2)}`
                                    : balances.owes2 > 0
                                    ? `${roommate2} pays ${roommate1} $${balances.owes2.toFixed(2)}`
                                    : 'ALL BALANCED'}
                            </div>
                            
                            {/* Detailed Breakdown */}
                            {expenses.length > 0 && (
                                <div className="mt-4 pt-4 border-t-2 border-lime-600">
                                    <div className="text-xs text-lime-600 mb-3">&gt; BREAKDOWN:</div>
                                    <div className="space-y-2 text-sm">
                                        {expenses.map(exp => {
                                            let share;
                                            if (exp.splitType === 'custom' && exp.roommateOwes) {
                                                share = exp.roommateOwes;
                                            } else {
                                                share = exp.splitType === '3-way' ? (exp.amount * 2) / 3 : exp.amount / 2;
                                            }
                                            return (
                                                <div key={exp.id}>
                                                    <div className="flex justify-between items-center gap-4">
                                                        <span className="text-lime-600 text-xs flex-1">
                                                            {exp.description}
                                                            {(exp.category === 'utilities' || exp.category === 'electric' || exp.category === 'wifi') 
                                                                ? ` (Total: $${exp.amount.toFixed(2)})` 
                                                                : ''}
                                                        </span>
                                                        <span className="font-bold whitespace-nowrap">${share.toFixed(2)}</span>
                                                    </div>
                                                    {exp.breakdown && (
                                                        <div className="ml-4 mt-1 space-y-1 text-xs text-lime-600">
                                                            <div className="flex justify-between">
                                                                <span>• Base Rent</span>
                                                                <span>${exp.breakdown.baseRent.toFixed(2)}</span>
                                                            </div>
                                                            <div className="flex justify-between">
                                                                <span>• Valet Trash (÷2)</span>
                                                                <span>${exp.breakdown.valet.toFixed(2)}</span>
                                                            </div>
                                                            <div className="flex justify-between">
                                                                <span>• Parking (÷2)</span>
                                                                <span>${exp.breakdown.parking.toFixed(2)}</span>
                                                            </div>
                                                        </div>
                                                    )}
                                                </div>
                                            );
                                        })}
                                        <div className="flex justify-between items-center pt-2 border-t border-lime-600 font-bold">
                                            <span>TOTAL OWED TO YOU:</span>
                                            <span className="text-xl">
                                                ${expenses.reduce((sum, exp) => {
                                                    if (exp.splitType === 'custom' && exp.roommateOwes) {
                                                        return sum + exp.roommateOwes;
                                                    }
                                                    const share = exp.splitType === '3-way' ? (exp.amount * 2) / 3 : exp.amount / 2;
                                                    return sum + share;
                                                }, 0).toFixed(2)}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* Add Expense Form */}
                        <div className="border-4 border-lime-600 p-4 md:p-6 bg-black mb-8">
                            <div className="flex justify-between items-center mb-4">
                                <div>
                                    <div className="text-sm text-lime-600">&gt; ADD_NEW_EXPENSE</div>
                                    <div className="text-xs text-lime-600">All expenses paid by {roommate1}</div>
                                </div>
                                <button 
                                    onClick={() => setShowRentCalculator(!showRentCalculator)}
                                    className="text-xs"
                                >
                                    {showRentCalculator ? 'SWITCH TO WIFI/ELEC' : 'SWITCH TO RENT'}
                                </button>
                            </div>

                            {showRentCalculator ? (
                                <div>
                                    <div className="text-xs text-lime-600 mb-3">
                                        Creates 2 entries: Base rent ($1700 + valet/2 + parking/2) and Utils (×2/3)
                                    </div>
                                    <div className="flex gap-4">
                                        <input
                                            type="number"
                                            placeholder="Total rent paid (e.g. 3650.00)..."
                                            value={totalRentPaid}
                                            onChange={(e) => setTotalRentPaid(e.target.value)}
                                            className="flex-1"
                                            step="0.01"
                                        />
                                        <button 
                                            onClick={addRentWithCalculation} 
                                            className="flex items-center gap-2 px-6"
                                        >
                                            <Plus className="w-4 h-4" />
                                            CALCULATE & ADD
                                        </button>
                                    </div>
                                </div>
                            ) : (
                                <div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                        <input
                                            type="text"
                                            placeholder="Description..."
                                            value={newExpense.description}
                                            onChange={(e) => setNewExpense({...newExpense, description: e.target.value})}
                                            className="w-full"
                                        />
                                        
                                        <input
                                            type="number"
                                            placeholder="Amount..."
                                            value={newExpense.amount}
                                            onChange={(e) => setNewExpense({...newExpense, amount: e.target.value})}
                                            className="w-full"
                                            step="0.01"
                                        />
                                    </div>
                                    
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <select
                                            value={newExpense.category}
                                            onChange={(e) => setNewExpense({...newExpense, category: e.target.value})}
                                            className="w-full"
                                        >
                                            <option value="wifi">WIFI</option>
                                            <option value="electric">ELECTRIC</option>
                                        </select>
                                        
                                        <button onClick={addExpense} className="w-full flex items-center justify-center gap-2">
                                            <Plus className="w-4 h-4" />
                                            ADD EXPENSE (3-WAY SPLIT)
                                        </button>
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* Expense List */}
                        <div className="border-4 border-lime-600 bg-black">
                            <div className="p-4 border-b-4 border-lime-600 text-sm text-lime-600">
                                &gt; EXPENSE_LOG ({expenses.length} entries)
                            </div>
                            
                            <div className="divide-y-2 divide-lime-600">
                                {expenses.length === 0 ? (
                                    <div className="p-8 text-center text-lime-600">
                                        NO EXPENSES LOGGED
                                    </div>
                                ) : (
                                    expenses.map((expense) => {
                                        let shareAmount;
                                        if (expense.splitType === 'custom' && expense.roommateOwes) {
                                            shareAmount = expense.roommateOwes;
                                        } else {
                                            shareAmount = expense.splitType === '3-way' ? (expense.amount * 2) / 3 : expense.amount / 2;
                                        }
                                        
                                        return (
                                            <div key={expense.id} className="p-4 hover:bg-lime-950 transition-colors">
                                                <div className="flex items-start justify-between gap-4">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-2 mb-1">
                                                            {getCategoryIcon(expense.category)}
                                                            <span className="text-xs text-lime-600 uppercase">{expense.category}</span>
                                                            {expense.splitType !== 'custom' && (
                                                                <span className="text-xs text-yellow-400 border border-yellow-400 px-2 py-0.5">
                                                                    {expense.splitType || '50/50'}
                                                                </span>
                                                            )}
                                                        </div>
                                                        <div className="font-bold mb-1 text-sm">{expense.description}</div>
                                                        <div className="text-xs text-lime-600">
                                                            Paid by {expense.paidBy} on {new Date(expense.date).toLocaleDateString()}
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="flex items-center gap-4">
                                                        <div className="text-right">
                                                            <div className="text-2xl font-bold">${expense.amount.toFixed(2)}</div>
                                                            <div className="text-xs text-lime-600">
                                                                Roommate owes: ${shareAmount.toFixed(2)}
                                                                {expense.splitType === '3-way' && ' (2/3)'}
                                                            </div>
                                                        </div>
                                                        <button
                                                            onClick={() => deleteExpense(expense.id)}
                                                            className="danger-btn p-2"
                                                        >
                                                            <Trash2 className="w-4 h-4" />
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        );
                                    })
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<RoommateExpenses />);
    </script>
</body>
</html>
